<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unicode</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    textarea {
      width: 100%;
      height: 90px;
      margin-bottom: 10px;
      font-size: 16px;
    }
    button {
      padding: 8px 14px;
      font-size: 14px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h2>原文</h2>
<textarea id="plain" placeholder="ここに入力"></textarea>

<h2>変換結果</h2>
<textarea id="encoded" placeholder="ここも直接入力できる"></textarea>

<button onclick="copyEncoded()">下をコピー</button>

<script>
var lock = false;

function shiftText(text, n) {
  var result = '';
  for (var c of text) {
    result += String.fromCodePoint(c.codePointAt(0) + n);
  }
  return result;
}

plain.addEventListener('input', () => {
  if (lock) return;
  lock = true;
  encoded.value = shiftText(plain.value, 10);
  lock = false;
});

encoded.addEventListener('input', () => {
  if (lock) return;
  lock = true;
  plain.value = shiftText(encoded.value, -10);
  lock = false;
});

function copyEncoded() {
  encoded.select();
  document.execCommand('copy');
}
</script>

</body>
</html>
